var C;((t)=>{t[t.DoNothing=0]="DoNothing";t[t.Draw=1]="Draw";t[t.DrawNextFrame=2]="DrawNextFrame"})(C||={});function V(e,n){let{density:i}=n,t=e-n.value;return[t*n.directionX/i+n.anchorX*n.width,t*n.directionY/i+n.anchorY*n.height]}class S{static defaultParams={value:0,redundancy:1,anchorX:0,anchorY:0,directionX:1,directionY:0,density:0.1,minDensity:0.02,maxDensity:100,width:100,height:20};#n;#e;#t=new ResizeObserver(()=>{let e=this.#e;if(!e)return;let n=this.params.pixelRatio??window.devicePixelRatio,{offsetWidth:i,offsetHeight:t}=e,a=this.params.width=i*n,s=this.params.height=t*n,r=this.canvas;if(!r)return;if(r.width=a,r.height=s,r.style.width=`${i}px`,r.style.height=`${t}px`,this.whenResized===1)this.draw();else if(this.whenResized===2)this.drawNextFrame=!0});initStore;initDraw;finalDraw;canvas;params;ticks;whenResized=0;constructor(e,n){let{defaultParams:i}=S;this.params=n?Object.assign({},i,n):{...i},this.ticks=e??[]}get keepSameSizeWith(){return this.#e}set keepSameSizeWith(e){if(this.#e===e)return;if(this.#e)this.#t.unobserve(this.#e);if(this.#e=e,e)this.#t.observe(e)}get drawNextFrame(){return this.#n!==void 0}set drawNextFrame(e){if(e===this.drawNextFrame)return;if(this.#n)cancelAnimationFrame(this.#n),this.#n=void 0;else this.#n=requestAnimationFrame(()=>this.draw())}draw(){this.drawNextFrame=!1;let{params:e,canvas:n}=this;if(p(e),!n)return;let i=n.getContext("2d");if(!i)throw new Error("Failed to get 2d context");let{directionX:t,directionY:a,value:s,redundancy:r,width:m,height:h,density:o}=e,f=e.anchorX*m,d=e.anchorY*h,c=-R(f,d,-t,-a,m,h)-r,u=R(f,d,t,a,m,h)+r,b=X(c,o,s,e.min),y=Y(u,o,s,e.max),T=this.initStore?.()??{},l={x:0,y:0,value:0,firstValue:b,lastValue:y};if(this.initDraw?.(i,T,l,e)===null)return;let v=t/o,E=a/o,{ticks:k}=this;for(let{0:{drawCall:w},1:O}of P(k,o,b,y))for(let{init:g,each:L,final:F}of Array.isArray(w)?w:[w]){if(g?.(i,T,l,e)===null)continue;for(let N of O){let x=(l.value=N)-s;l.x=x*v+f,l.y=x*E+d,L(i,T,l,e)}F?.(i,T,l,e)}this.finalDraw?.(i,T,l,e)}}function p(e){if(e.density<e.minDensity)e.density=e.minDensity;else if(e.density>e.maxDensity)e.density=e.maxDensity}function P(e,n,i,t){let a=e.filter(({maxDensityToShow:r})=>r===void 0?!0:r>=n).map((r)=>[r,M(r,i)]).filter(({1:r})=>r<=t),s=new Set;for(let r=a.length-1;r>=0;--r){let{0:{shy:m=!1,multiply:h},1:o}=a[r],f=Math.floor((t-o)/h)+1,d=[];if(r)for(let c=0;c<f;++c){let u=o+c*h;if(m&&s.has(u))continue;d.push(u),s.add(u)}else for(let c=0;c<f;++c){let u=o+c*h;if(!m||!s.has(u))d.push(u)}a[r][1]=d}return a}function D(e){return Math.abs(e)<=Number.EPSILON}function R(e,n,i,t,a,s){return Math.min(D(i)?1/0:(i>0?a-e:-e)/i,D(t)?1/0:(t>0?s-n:-n)/t)}function X(e,n,i,t){let a=i+e*n;return t===void 0?a:Math.max(t,a)}function Y(e,n,i,t){let a=i+e*n;return t===void 0?a:Math.min(t,a)}function M({multiply:e,zeroOffset:n=0},i){return Math.ceil((i-n)/e)*e+n}export{V as valueToCoord,C as WhenResized,S as LinearTick};

//# debugId=F151A07CE72FC09264756E2164756E21
//# sourceMappingURL=index.js.map
